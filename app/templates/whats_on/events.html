{% extends 'base.html' %}

{%- from 'components/card/macro.html' import tnaCard -%}

{%- set pageTitle = page_data.title -%}

{% block content %}
<div class="tna-container tna-section">
  <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny">
    <hgroup class="tna-hgroup-xl">
      <p class="tna-hgroup__supertitle">What’s on</p>
      <h1 class="tna-hgroup__title">{{ pageTitle }}</h1>
    </hgroup>
    <p class="tna-large-paragraph">Discover our exhibitions, events and family activities programme for all – online and at Kew.</p>
  </div>
</div>
<div class="tna-container">
  {% for event in events %}
  <div class="tna-column tna-column--width-1-2 tna-column--full-small tna-column--full-tiny tna-!--margin-bottom-l">
    {% set event_card_content = {
      'supertitle': event.type_label,
      'title': event.title,
      'headingLevel': 2,
      'headingSize': 'm',
      'href': event.url,
      'meta': [
        {
          'title': 'Date',
          'text': pretty_date_range(event.start_date, event.end_date),
          'icon': 'calendar'
        },
        {
          'title': 'Location',
          'text': event.short_location,
          'icon': 'location-dot'
        },
        {
          'title': 'Cost',
          'text': event.price_range,
          'icon': 'ticket'
        }
      ],
      'text': event.teaser_text,
      'fullAreaClick': True
    } %}
    {%- if event.teaser_image %}
      {% set event_card_content = dict(event_card_content, **{
        'lazyImage': True,
        'imageSrc': event.teaser_image.jpeg.url,
        'imageAlt': event.teaser_image.description,
        'imageWidth': event.teaser_image.jpeg.width,
        'imageHeight': event.teaser_image.jpeg.height,
        'imageSources': [
          {
            'src': event.teaser_image.webp.url,
            'type': 'image/webp',
            'width': event.teaser_image.webp.width,
            'height': event.teaser_image.webp.height
          }
        ]
      }) %}
    {%- endif %}
    {{ tnaCard(event_card_content) }}
  </div>
  {% endfor %}
</div>
{% endblock %}
