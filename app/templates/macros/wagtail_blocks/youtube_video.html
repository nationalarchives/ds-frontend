{%- from 'components/button/macro.html' import tnaButton -%}
{%- from 'components/details/macro.html' import tnaDetails -%}

{% macro wagtailYouTubeVideo(block_value, id) %}
  <a href="https://www.youtube.com/watch?v={{ block_value.video_id }}" id="{{ id }}" class="etna-video etna-video--youtube video-js">
    {% if block_value.preview_image %}
    <img src="{{ block_value.preview_image.jpeg.full_url }}" width="{{ block_value.preview_image.jpeg.width }}" height="{{ block_value.preview_image.jpeg.height }}" class="etna-video__preview-image" alt="">
    {% endif %}
    <span class="etna-video__label">
      <span class="tna-visually-hidden">Watch</span>
      {{ block_value.title }}
      <span class="tna-visually-hidden">on YouTube</span>
    </span>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="etna-video__icon" aria-hidden="true" width="64"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path fill="#fff" d="M 50 100 H 476 V 412 H 100 L 100 100"/><path fill="#f00" d="M549.7 124.1c-6.3-23.7-24.8-42.3-48.3-48.6C458.8 64 288 64 288 64S117.2 64 74.6 75.5c-23.5 6.3-42 24.9-48.3 48.6-11.4 42.9-11.4 132.3-11.4 132.3s0 89.4 11.4 132.3c6.3 23.7 24.8 41.5 48.3 47.8C117.2 448 288 448 288 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zm-317.5 213.5V175.2l142.7 81.2-142.7 81.2z"/></svg>
  </a>
  {%- if block_value.captions_available %}
  <div class="tna-button-group tna-!--margin-top-s" hidden>
    {{ tnaButton({
      'text': 'Watch captioned version on YouTube',
      'href': 'https://www.youtube.com/watch?v=' + block_value.video_id,
      'icon': 'brands fa-youtube',
      'small': True
    }) }}
  </div>
  {%- endif %}
  {%- if block_value.transcript %}
  {{ tnaDetails({
    'title': 'Video transcript',
    'body': block_value.transcript | tna_html
  }) }}
  {%- endif %}
{% endmacro %}
