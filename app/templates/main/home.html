{% extends 'base.html' %}

{%- from 'components/button/macro.html' import tnaButton -%}
{%- from 'components/card/macro.html' import tnaCard -%}
{%- from 'components/hero/macro.html' import tnaHero -%}
{%- from 'macros/global_alert_banners.html' import global_alert_banners -%}
{%- from 'macros/meta.html' import meta -%}

{%- set themeAccent = 'black' if page_data.mourning_notice else 'green' -%}

{% block head %}
{{ super() }}
{{- meta(page_data) }}
    <link rel="canonical" href="{{ page_data.meta.html_url }}">
{% endblock %}

{% block stylesheets %}
{{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='homepage.css', v=app_config.BUILD_VERSION) }}" media="screen,print">
{% endblock %}

{% block content %}
{{ global_alert_banners(page_data.global_alert, page_data.mourning_notice, 'm', 'm') }}
<header class="tna-hero tna-hero--home">
  <figure class="tna-hero__figure" itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
    <meta itemprop="description" content="{{ page_data.hero_image.description }}">
    <meta itemprop="url" content="{{ url_for('wagtail.image_page', image_uuid=page_data.hero_image.uuid, _external=True, _scheme='https') }}">
    <meta itemprop="name" content="{{ page_data.hero_image.title }}">
    <meta itemprop="contentUrl" content="{{ page_data.hero_image.jpeg.full_url }}">
    <meta itemprop="width" content="{{ page_data.hero_image.jpeg.width }}">
    <meta itemprop="height" content="{{ page_data.hero_image.jpeg.height }}">
    <meta itemprop="acquireLicensePage" content="https://www.nationalarchives.gov.uk/legal/copyright/image-reproduction/">
    <div class="tna-container tna-hero__inner--custom">
      <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny tna-hero__content">
        <div class="tna-hero__content-inner">
          <h1 class="tna-heading-xl">{{ page_data.title }}</h1>
          <div class="tna-large-paragraph tna-large-paragraph--bold">{{ page_data.intro | tna_html | safe }}</div>
          <div class="tna-button-group">
            {{ tnaButton({
              'text': 'Help with your research',
              'href': '/help-with-your-research/',
              'icon': 'chevron-right',
              'rightAlignIcon': True,
              'classes': 'tna-button--solid-hover'
            }) }}
            {{ tnaButton({
              'text': 'Search the catalogue',
              'href': 'https://discovery.nationalarchives.gov.uk/',
              'icon': 'chevron-right',
              'rightAlignIcon': True,
              'classes': 'tna-button--solid-hover'
            }) }}
            {{ tnaButton({
              'text': 'Plan your visit',
              'href': '/about/visit-us/',
              'icon': 'chevron-right',
              'rightAlignIcon': True,
              'classes': 'tna-button--solid-hover'
            }) }}
          </div>
        </div>
      </div>
    </div>
    <picture class="tna-hero__image">
      {%- for source in [
        {
          'src': page_data.hero_image_small.webp.full_url,
          'width': page_data.hero_image_small.webp.width,
          'height': page_data.hero_image_small.webp.height,
          'type': 'image/webp',
          'media': '(max-width: 48em)'
        },
        {
          'src': page_data.hero_image_small.jpeg.full_url,
          'width': page_data.hero_image_small.jpeg.width,
          'height': page_data.hero_image_small.jpeg.height,
          'type': 'image/jpeg',
          'media': '(max-width: 48em)'
        },
        {
          'src': page_data.hero_image.webp.full_url,
          'width': page_data.hero_image.webp.width,
          'height': page_data.hero_image.webp.height,
          'type': 'image/webp'
        }
      ] %}
      <source srcset="{{ source.src }}" type="{{ source.type }}" width="{{ source.width if source.width else page_data.hero_image.jpeg.width }}" height="{{ source.height if source.height else page_data.hero_image.jpeg.height }}"{% if source.media %} media="{{ source.media }}"{% endif %}>
      {%- endfor %}
      <img src="{{ page_data.hero_image.jpeg.url }}" alt="{{ page_data.hero_image.description }}" width="{{ page_data.hero_image.jpeg.width }}" height="{{ page_data.hero_image.jpeg.height }}" fetchpriority="high" itemprop="url">
    </picture>
    {%- if page_data.hero_image_caption or page_data.hero_image.copyright -%}
    <figcaption class="tna-hero__caption">
      <details class="tna-hero__details">
        <summary class="tna-hero__details-summary tna-button tna-button--small tna-button--icon-only-mobile" aria-label="Additional information about this image">
          <i class="fa-solid fa-circle-info tna-hero__details-summary-icon" aria-hidden="true"></i>
          About this image
        </summary>
        <div class="tna-hero__information" itemprop="description">
          {{ page_data.hero_image_caption | safe }}
          {%- if page_data.hero_image.copyright %}
          <div class="tna-hero__copyright" itemprop="copyrightNotice">
            {{ page_data.hero_image.copyright | tna_html | safe }}
          </div>
          {%- endif %}
        </div>
      </details>
    </figcaption>
    {%- endif -%}
  </figure>
</header>

<section class="tna-section tna-container">
  {%- if page_data.primary_promo %}
  <div class="tna-column tna-column--full">
    {%- if page_data.primary_promo[0].type == 'featured_page' %}
      {% set card_content = {
        'supertitle': page_data.primary_promo[0].value.page.type_label,
        'title': page_data.primary_promo[0].value.page.title,
        'headingLevel': 2,
        'headingSize': 'l',
        'href': page_data.primary_promo[0].value.page.url,
        'text': page_data.primary_promo[0].value.page.teaser_text,
        'style': 'contrast',
        'fullAreaClick': True,
        'horizontal': True,
        'horizontalSmallImage': True,
        'classes': 'tna-card--wider-horizontal-image'
      } %}
      {%- if page_data.primary_promo[0].value.page.teaser_image %}
        {% set card_content = dict(card_content, **{
          'imageSrc': page_data.primary_promo[0].value.page.teaser_image.jpeg.url,
          'imageAlt': page_data.primary_promo[0].value.page.teaser_image.description,
          'imageWidth': page_data.primary_promo[0].value.page.teaser_image.jpeg.width,
          'imageHeight': page_data.primary_promo[0].value.page.teaser_image.jpeg.height,
          'imageSources': [
            {
              'src': page_data.primary_promo[0].value.page.teaser_image.webp.url,
              'width': page_data.primary_promo[0].value.page.teaser_image.webp.width,
              'height': page_data.primary_promo[0].value.page.teaser_image.webp.height,
              'type': 'image/webp'
            }
          ]
        }) %}
      {%- endif %}
      {{ tnaCard(card_content) }}
    {%- elif page_data.primary_promo[0].type == 'featured_external_link' %}
      {% set card_content = {
        'supertitle': page_data.primary_promo[0].value.supertitle,
        'title': page_data.primary_promo[0].value.title,
        'headingLevel': 2,
        'headingSize': 's',
        'href': page_data.primary_promo[0].value.url,
        'text': page_data.primary_promo[0].value.description,
        'style': 'contrast',
        'fullAreaClick': True,
        'horizontal': True,
        'horizontalSmallImage': True,
        'classes': 'tna-card--wider-horizontal-image'
      } %}
      {%- if page_data.primary_promo[0].value.image %}
        {% set card_content = dict(card_content, **{
          'imageSrc': page_data.primary_promo[0].value.image.jpeg.full_url,
          'imageAlt': page_data.primary_promo[0].value.image.description,
          'imageWidth': page_data.primary_promo[0].value.image.jpeg.width,
          'imageHeight': page_data.primary_promo[0].value.image.jpeg.height,
          'imageSources': [
            {
              'src': page_data.primary_promo[0].value.image.webp.full_url,
              'type': 'image/webp',
              'width': page_data.primary_promo[0].value.image.webp.width,
              'height': page_data.primary_promo[0].value.image.webp.height
            }
          ]
        }) %}
      {%- endif %}
      {{ tnaCard(card_content) }}
    {%- endif %}
  </div>
  {%- endif %}
  {%- for page in page_data.secondary_promos %}
    <div class="tna-column tna-column--width-1-3 tna-column--width-1-2-small tna-column--full-tiny tna-!--margin-top-m">
      {%- if page.type == 'featured_page' %}
        {% set card_content = {
          'supertitle': page.value.page.type_label,
          'title': page.value.page.title,
          'headingLevel': 2,
          'headingSize': 's',
          'href': page.value.page.url,
          'text': page.value.page.teaser_text,
          'style': 'plain',
          'fullAreaClick': True,
          'classes': 'tna-card--full-height'
        } %}
        {%- if page.value.page.teaser_image %}
          {% set card_content = dict(card_content, **{
            'imageSrc': page.value.page.teaser_image.jpeg.full_url,
            'imageAlt': page.value.page.teaser_image.description,
            'imageWidth': page.value.page.teaser_image.jpeg.width,
            'imageHeight': page.value.page.teaser_image.jpeg.height,
            'imageSources': [
              {
                'src': page.value.page.teaser_image.webp.full_url,
                'type': 'image/webp',
                'width': page.value.page.teaser_image.webp.width,
                'height': page.value.page.teaser_image.webp.height
              }
            ]
          }) %}
        {%- endif %}
        {{ tnaCard(card_content) }}
      {%- elif page.type == 'featured_external_link' %}
        {% set card_content = {
          'supertitle': page.value.supertitle,
          'title': page.value.title,
          'headingLevel': 2,
          'headingSize': 's',
          'href': page.value.url,
          'text': page.value.description,
          'style': 'plain',
          'fullAreaClick': True,
          'classes': 'tna-card--full-height'
        } %}
        {%- if page.value.image %}
          {% set card_content = dict(card_content, **{
            'imageSrc': page.value.image.jpeg.full_url,
            'imageAlt': page.value.image.description,
            'imageWidth': page.value.image.jpeg.width,
            'imageHeight': page.value.image.jpeg.height,
            'imageSources': [
              {
                'src': page.value.image.webp.full_url,
                'type': 'image/webp',
                'width': page.value.image.webp.width,
                'height': page.value.image.webp.height
              }
            ]
          }) %}
        {%- endif %}
        {{ tnaCard(card_content) }}
      {%- endif %}
    </div>
  {%- endfor %}
</section>

<section class="tna-section tna-background-accent-light tna-!--padding-top-s">
  <div class="tna-container">
    <div class="tna-column tna-column--width-1-4 tna-column--width-1-2-small tna-column--full-tiny tna-!--margin-top-m">
      {{ tnaCard({
        'title': 'Our research & academic collaboration',
        'headingLevel': 2,
        'headingSize': 's',
        'href': '#',
        'text': 'Learn about our work as an Independent Research Organisation.'
      }) }}
    </div>
    <div class="tna-column tna-column--width-1-4 tna-column--width-1-2-small tna-column--full-tiny tna-!--margin-top-m">
      {{ tnaCard({
        'title': 'Archives sector',
        'headingLevel': 2,
        'headingSize': 's',
        'href': '#',
        'text': 'Get help to develop your collections and archives services.'
      }) }}
    </div>
    <div class="tna-column tna-column--width-1-4 tna-column--width-1-2-small tna-column--full-tiny tna-!--margin-top-m">
      {{ tnaCard({
        'title': 'Education',
        'headingLevel': 2,
        'headingSize': 's',
        'href': '#',
        'text': 'View award-winning resources for students and teachers.'
      }) }}
    </div>
    <div class="tna-column tna-column--width-1-4 tna-column--width-1-2-small tna-column--full-tiny tna-!--margin-top-m">
      {{ tnaCard({
        'title': 'Information management',
        'headingLevel': 2,
        'headingSize': 's',
        'href': '#',
        'text': 'Access best practice in records management and transfer, and information re-use.'
      }) }}
    </div>
  </div>
</section>
{% endblock %}

{% block bodyEnd %}
{{ super() }}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "GovernmentOrganization",
        "name": "The National Archives",
        "url": "https://www.nationalarchives.gov.uk/",
        "areaServed": {
          "@type": "AdministrativeArea",
          "name": "England and Wales"
        },
        "foundingDate": "2003-04",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Kew",
          "addressRegion": "Richmond, London",
          "addressCountry": "UK",
          "postalCode": "TW9 4DU",
          "streetAddress": "Bessant Drive"
        },
        "parentOrganization": {
          "@type": "Organization",
          "name": "Department for Culture, Media and Sport",
          "url": "https://www.gov.uk/government/organisations/department-for-culture-media-and-sport"
        },
        "logo": "{{ url_for('static', filename='assets/images/icon-1024x1024.png') }}",
        "sameAs": [
            "https://twitter.com/UKNatArchives",
            "https://www.youtube.com/c/TheNationalArchivesUK",
            "https://www.facebook.com/TheNationalArchives",
            "https://www.flickr.com/photos/nationalarchives",
            "https://www.instagram.com/nationalarchivesuk/",
            "https://www.tiktok.com/@uknatarchives",
            "https://en.wikipedia.org/wiki/The_National_Archives_(United_Kingdom)",
            "https://www.gov.uk/government/organisations/the-national-archives"
        ]
      }
    </script>
{% endblock %}
